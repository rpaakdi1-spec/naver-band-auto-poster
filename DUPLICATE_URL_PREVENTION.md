# ì¤‘ë³µ URL ë“±ë¡ ë°©ì§€ ê¸°ëŠ¥ ì™„ì„± ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì±„íŒ…ë°© ë“±ë¡ ì‹œ **ê°™ì€ URLì´ ì¤‘ë³µìœ¼ë¡œ ë“±ë¡ë˜ëŠ” ê²ƒì„ ë°©ì§€**í•˜ê³ , **ì•Œë¦¼ ë©”ì‹œì§€**ë¥¼ í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## âœ¨ ì£¼ìš” ê°œì„ ì‚¬í•­

### 1. ì¤‘ë³µ URL ë“±ë¡ ë°©ì§€

#### GUI ë²„ì „ (src/gui.py)
- ì±„íŒ…ë°© ì¶”ê°€ ì‹œ ê¸°ì¡´ URLê³¼ ë¹„êµ
- ì¤‘ë³µ ì‹œ ê²½ê³  ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
- ì´ë¯¸ ë“±ë¡ëœ ì±„íŒ…ë°© ì´ë¦„ê³¼ URL í‘œì‹œ
- ë¡œê·¸ì— ì¤‘ë³µ ì‹œë„ ê¸°ë¡

#### ì›¹ ë²„ì „ (streamlit_app.py)
- ì±„íŒ…ë°© ì¶”ê°€ ì‹œ ê¸°ì¡´ URLê³¼ ë¹„êµ
- ì¤‘ë³µ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- ì´ë¯¸ ë“±ë¡ëœ ì±„íŒ…ë°© ì •ë³´ í‘œì‹œ
- ë¡œê·¸ì— ì¤‘ë³µ ì‹œë„ ê¸°ë¡

### 2. ê¸°ì¡´ ë°ì´í„° ìë™ ì •ë¦¬

#### BandPoster í´ë˜ìŠ¤ (src/band_poster.py)
- ì„¤ì • íŒŒì¼ ë¡œë“œ ì‹œ ì¤‘ë³µ URL ìë™ ì œê±°
- seen_urls ì…‹ìœ¼ë¡œ ì¤‘ë³µ ê²€ì‚¬
- ì¤‘ë³µ ì œê±° ë¡œê·¸ ê¸°ë¡
- ì •ë¦¬ëœ ë°ì´í„°ë¡œ ìë™ ì—…ë°ì´íŠ¸

### 3. ì¤‘ë³µ ì²´í¬ ë„êµ¬

#### check_duplicate_urls.py
- config.jsonì—ì„œ ì¤‘ë³µ URL ê²€ìƒ‰
- ì¤‘ë³µëœ ì±„íŒ…ë°© ì •ë³´ í‘œì‹œ
- í•´ê²° ë°©ë²• ì•ˆë‚´
- ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥

---

## ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### GUI ì¤‘ë³µ ì²´í¬ ì½”ë“œ (src/gui.py)

```python
def add_chat_url(self):
    """ì±„íŒ…ë°© URL ì¶”ê°€"""
    name = self.chat_name_entry.get().strip()
    url = self.chat_url_entry.get().strip()
    
    # ê¸°ë³¸ ê²€ì¦
    if not url:
        messagebox.showwarning("ê²½ê³ ", "ì±„íŒ…ë°© URLì„ ì…ë ¥í•˜ì„¸ìš”.")
        return
    
    if not url.startswith("https://"):
        messagebox.showwarning("ê²½ê³ ", "ì˜¬ë°”ë¥¸ URLì„ ì…ë ¥í•˜ì„¸ìš”.")
        return
    
    # ì¤‘ë³µ URL ì²´í¬
    existing_rooms = self.poster.config.get('chat_rooms', [])
    for room in existing_rooms:
        if room.get('url') == url:
            messagebox.showwarning(
                "ì¤‘ë³µ ë“±ë¡", 
                f"âš ï¸ ì´ë¯¸ ë“±ë¡ëœ ì±„íŒ…ë°© URLì…ë‹ˆë‹¤.\n\n"
                f"ì±„íŒ…ë°©: {room.get('name', 'ì•Œ ìˆ˜ ì—†ìŒ')}\n"
                f"URL: {url}"
            )
            self.log(f"âš ï¸ ì¤‘ë³µ ë“±ë¡ ì‹œë„: {url}")
            return
    
    # ë‚˜ë¨¸ì§€ ë“±ë¡ ë¡œì§...
```

### Streamlit ì¤‘ë³µ ì²´í¬ ì½”ë“œ (streamlit_app.py)

```python
def add_chat_room(name, url):
    """ì±„íŒ…ë°© ì¶”ê°€"""
    # ê¸°ë³¸ ê²€ì¦
    if not url:
        st.warning("âš ï¸ ì±„íŒ…ë°© URLì„ ì…ë ¥í•˜ì„¸ìš”.")
        return False
    
    if not url.startswith("https://"):
        st.warning("âš ï¸ ì˜¬ë°”ë¥¸ URLì„ ì…ë ¥í•˜ì„¸ìš”.")
        return False
    
    # ì¤‘ë³µ URL ì²´í¬
    existing_rooms = st.session_state.poster.config.get('chat_rooms', [])
    for room in existing_rooms:
        if room.get('url') == url:
            st.error(
                f"âš ï¸ ì´ë¯¸ ë“±ë¡ëœ ì±„íŒ…ë°© URLì…ë‹ˆë‹¤.\n\n"
                f"ì±„íŒ…ë°©: **{room.get('name', 'ì•Œ ìˆ˜ ì—†ìŒ')}**\n\n"
                f"URL: {url}"
            )
            log_message(f"âš ï¸ ì¤‘ë³µ ë“±ë¡ ì‹œë„: {url}")
            return False
    
    # ë‚˜ë¨¸ì§€ ë“±ë¡ ë¡œì§...
```

### ê¸°ì¡´ ë°ì´í„° ì •ë¦¬ ì½”ë“œ (src/band_poster.py)

```python
def _load_config(self) -> Dict:
    """ì„¤ì • íŒŒì¼ ë¡œë“œ"""
    if not os.path.exists(self.config_path):
        return self._get_default_config()
    
    with open(self.config_path, 'r', encoding='utf-8') as f:
        config = json.load(f)
    
    # ì¤‘ë³µ URL ì œê±° (ê¸°ì¡´ ë°ì´í„° ì •ë¦¬)
    if 'chat_rooms' in config:
        seen_urls = set()
        unique_rooms = []
        for room in config['chat_rooms']:
            url = room.get('url')
            if url and url not in seen_urls:
                seen_urls.add(url)
                unique_rooms.append(room)
            elif url in seen_urls:
                self.logger.warning(
                    f"âš ï¸ ì¤‘ë³µ URL ì œê±°: {room.get('name')} - {url}"
                )
        
        if len(unique_rooms) < len(config['chat_rooms']):
            config['chat_rooms'] = unique_rooms
            removed = len(config['chat_rooms']) - len(unique_rooms)
            self.logger.info(f"âœ… ì¤‘ë³µ URL {removed}ê°œ ì œê±° ì™„ë£Œ")
    
    return config
```

---

## ğŸ“Š ì‚¬ìš© ì˜ˆì‹œ

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì¤‘ë³µ ë“±ë¡ ì‹œë„ (GUI)

1. **ì²« ë²ˆì§¸ ë“±ë¡**
   ```
   ì±„íŒ…ë°© ì´ë¦„: ê³µì§€ë°©
   URL: https://band.us/band/12345/chat/ABC123
   â†’ âœ… ì±„íŒ…ë°© ì¶”ê°€: [ê³µì§€ë°©] https://band.us/...
   ```

2. **ê°™ì€ URL ì¬ë“±ë¡ ì‹œë„**
   ```
   ì±„íŒ…ë°© ì´ë¦„: ìƒˆ ê³µì§€ë°©
   URL: https://band.us/band/12345/chat/ABC123
   â†’ âš ï¸ ê²½ê³  ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ:
   
   "ì´ë¯¸ ë“±ë¡ëœ ì±„íŒ…ë°© URLì…ë‹ˆë‹¤.
   
   ì±„íŒ…ë°©: ê³µì§€ë°©
   URL: https://band.us/band/12345/chat/ABC123"
   ```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¤‘ë³µ ë“±ë¡ ì‹œë„ (Streamlit)

1. **ì²« ë²ˆì§¸ ë“±ë¡**
   ```
   ì±„íŒ…ë°© ì´ë¦„: ê³µì§€ë°©
   URL: https://band.us/band/12345/chat/ABC123
   â†’ âœ… ì±„íŒ…ë°© ì¶”ê°€: [ê³µì§€ë°©] https://band.us/...
   ```

2. **ê°™ì€ URL ì¬ë“±ë¡ ì‹œë„**
   ```
   ì±„íŒ…ë°© ì´ë¦„: ìƒˆ ê³µì§€ë°©
   URL: https://band.us/band/12345/chat/ABC123
   â†’ ğŸ”´ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ:
   
   "âš ï¸ ì´ë¯¸ ë“±ë¡ëœ ì±„íŒ…ë°© URLì…ë‹ˆë‹¤.
   
   ì±„íŒ…ë°©: ê³µì§€ë°©
   URL: https://band.us/band/12345/chat/ABC123"
   ```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê¸°ì¡´ ì¤‘ë³µ ë°ì´í„° ìë™ ì •ë¦¬

#### ì •ë¦¬ ì „ (config.json)
```json
{
  "chat_rooms": [
    {
      "name": "ê³µì§€ë°©",
      "url": "https://band.us/band/12345/chat/ABC123",
      "enabled": true
    },
    {
      "name": "ìƒˆ ê³µì§€ë°©",
      "url": "https://band.us/band/12345/chat/ABC123",
      "enabled": true
    },
    {
      "name": "ì¼ë°˜ë°©",
      "url": "https://band.us/band/12345/chat/DEF456",
      "enabled": true
    }
  ]
}
```

#### ì •ë¦¬ í›„ (í”„ë¡œê·¸ë¨ ì‹œì‘ ì‹œ ìë™)
```
ë¡œê·¸:
âš ï¸ ì¤‘ë³µ URL ì œê±°: ìƒˆ ê³µì§€ë°© - https://band.us/band/12345/chat/ABC123
âœ… ì¤‘ë³µ URL 1ê°œ ì œê±° ì™„ë£Œ

ìµœì¢… ê²°ê³¼:
- ê³µì§€ë°© (https://band.us/.../ABC123) âœ…
- ì¼ë°˜ë°© (https://band.us/.../DEF456) âœ…
```

---

## ğŸ› ï¸ ì¤‘ë³µ ì²´í¬ ë„êµ¬ ì‚¬ìš©ë²•

### check_duplicate_urls.py ì‹¤í–‰

```bash
cd /home/user/webapp
python check_duplicate_urls.py
```

### ì¶œë ¥ ì˜ˆì‹œ (ì¤‘ë³µ ìˆìŒ)

```
================================================================================
ğŸ“Š ì±„íŒ…ë°© URL ì¤‘ë³µ ì²´í¬
================================================================================
ì´ ë“±ë¡ëœ ì±„íŒ…ë°©: 5ê°œ

âš ï¸ ì¤‘ë³µëœ URL ë°œê²¬!
================================================================================

ì¤‘ë³µ íšŸìˆ˜: 2íšŒ
URL: https://band.us/band/12345/chat/ABC123

  [1] ì±„íŒ…ë°© ì´ë¦„: ê³µì§€ë°©
      í™œì„±í™”: âœ…
  [2] ì±„íŒ…ë°© ì´ë¦„: ìƒˆ ê³µì§€ë°©
      í™œì„±í™”: âœ…

================================================================================
ğŸ”§ í•´ê²° ë°©ë²•:
1. GUI ë˜ëŠ” ì›¹ ë²„ì „ì—ì„œ ì¤‘ë³µëœ ì±„íŒ…ë°©ì„ ì‚­ì œí•˜ì„¸ìš”.
2. ë˜ëŠ” config/config.json íŒŒì¼ì„ ì§ì ‘ í¸ì§‘í•˜ì„¸ìš”.
3. í”„ë¡œê·¸ë¨ì„ ì¬ì‹œì‘í•˜ë©´ ìë™ìœ¼ë¡œ ì¤‘ë³µì´ ì œê±°ë©ë‹ˆë‹¤.
================================================================================
```

### ì¶œë ¥ ì˜ˆì‹œ (ì¤‘ë³µ ì—†ìŒ)

```
================================================================================
ğŸ“Š ì±„íŒ…ë°© URL ì¤‘ë³µ ì²´í¬
================================================================================
ì´ ë“±ë¡ëœ ì±„íŒ…ë°©: 3ê°œ

âœ… ì¤‘ë³µëœ URLì´ ì—†ìŠµë‹ˆë‹¤!
================================================================================

ğŸ“‹ ë“±ë¡ëœ ì±„íŒ…ë°© ëª©ë¡:
1. [âœ… í™œì„±] ê³µì§€ë°©
   URL: https://band.us/band/12345/chat/ABC123...
2. [âœ… í™œì„±] ì¼ë°˜ë°©
   URL: https://band.us/band/12345/chat/DEF456...
3. [âŒ ë¹„í™œì„±] í…ŒìŠ¤íŠ¸ë°©
   URL: https://band.us/band/12345/chat/GHI789...
================================================================================
```

---

## ğŸ” ì¤‘ë³µ í¬ìŠ¤íŒ… ë¬¸ì œ í•´ê²°

### ì›ì¸ ë¶„ì„

**"í•œ êµ°ë°ë§Œ 2ë²ˆ í¬ìŠ¤íŒ…"** ë¬¸ì œì˜ ì£¼ìš” ì›ì¸:

1. **ê°™ì€ URLì´ ì¤‘ë³µ ë“±ë¡ë¨**
   - 2ê°œì˜ ì±„íŒ…ë°©ì´ ì²´í¬ë˜ì–´ ìˆì§€ë§Œ
   - ì‹¤ì œë¡œëŠ” ê°™ì€ URLì´ 2ë²ˆ ë“±ë¡ë¨
   - ê²°ê³¼: ê°™ì€ ì±„íŒ…ë°©ì— 2ë²ˆ í¬ìŠ¤íŒ…

2. **í•´ê²° ë°©ë²•**
   - ì¤‘ë³µ URL ì œê±°
   - ìƒˆ ë“±ë¡ ì‹œ ì¤‘ë³µ ë°©ì§€
   - í”„ë¡œê·¸ë¨ ì¬ì‹œì‘ ì‹œ ìë™ ì •ë¦¬

### í™•ì¸ ë°©ë²•

1. **check_duplicate_urls.py ì‹¤í–‰**
   ```bash
   python check_duplicate_urls.py
   ```

2. **ë¡œê·¸ í™•ì¸**
   ```
   logs/band_poster_20260123.log íŒŒì¼ ì—´ê¸°
   
   ì°¾ì„ ë‚´ìš©:
   - "ì´ ë“±ë¡ëœ ì±„íŒ…ë°©: Xê°œ"
   - "í™œì„±í™”ëœ ì±„íŒ…ë°©: Yê°œ"
   - ê° ì±„íŒ…ë°© ì´ë¦„ê³¼ URL
   ```

3. **config.json ì§ì ‘ í™•ì¸**
   ```bash
   cat config/config.json | grep -A 5 "chat_rooms"
   ```

---

## ğŸ“ ë³€ê²½ëœ íŒŒì¼

### ìˆ˜ì •ëœ íŒŒì¼
1. **src/band_poster.py**
   - `_load_config()`: ì¤‘ë³µ URL ìë™ ì œê±°

2. **src/gui.py**
   - `add_chat_url()`: ì¤‘ë³µ URL ì²´í¬ ë° ì•Œë¦¼

3. **streamlit_app.py**
   - `add_chat_room()`: ì¤‘ë³µ URL ì²´í¬ ë° ì•Œë¦¼

### ìƒˆë¡œ ì¶”ê°€ëœ íŒŒì¼
1. **check_duplicate_urls.py**
   - ì¤‘ë³µ URL ê²€ì‚¬ ë„êµ¬
   - ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥

---

## âœ… í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### GUI ë²„ì „ í…ŒìŠ¤íŠ¸

- [ ] 1. ì±„íŒ…ë°© URL ì¶”ê°€
- [ ] 2. ê°™ì€ URL ì¬ë“±ë¡ ì‹œë„
- [ ] 3. ê²½ê³  ë‹¤ì´ì–¼ë¡œê·¸ í™•ì¸
- [ ] 4. ë¡œê·¸ì— ê²½ê³  ë©”ì‹œì§€ í™•ì¸

### ì›¹ ë²„ì „ í…ŒìŠ¤íŠ¸

- [ ] 1. ì±„íŒ…ë°© URL ì¶”ê°€
- [ ] 2. ê°™ì€ URL ì¬ë“±ë¡ ì‹œë„
- [ ] 3. ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
- [ ] 4. ë¡œê·¸ì— ê²½ê³  ë©”ì‹œì§€ í™•ì¸

### ìë™ ì •ë¦¬ í…ŒìŠ¤íŠ¸

- [ ] 1. config.jsonì— ìˆ˜ë™ìœ¼ë¡œ ì¤‘ë³µ URL ì¶”ê°€
- [ ] 2. í”„ë¡œê·¸ë¨ ì¬ì‹œì‘
- [ ] 3. ë¡œê·¸ì—ì„œ "ì¤‘ë³µ URL Xê°œ ì œê±° ì™„ë£Œ" í™•ì¸
- [ ] 4. config.jsonì—ì„œ ì¤‘ë³µ ì œê±° í™•ì¸

### í¬ìŠ¤íŒ… í…ŒìŠ¤íŠ¸

- [ ] 1. 2ê°œ ì±„íŒ…ë°© ë“±ë¡ (ë‹¤ë¥¸ URL)
- [ ] 2. 2ê°œ ëª¨ë‘ ì²´í¬
- [ ] 3. í¬ìŠ¤íŒ… ì‹¤í–‰
- [ ] 4. ê° ì±„íŒ…ë°©ì— 1ë²ˆì”©ë§Œ í¬ìŠ¤íŒ…ë˜ëŠ”ì§€ í™•ì¸

---

## ğŸ¯ ê²°ë¡ 

### êµ¬í˜„ëœ ê¸°ëŠ¥

1. âœ… **ì¤‘ë³µ URL ë“±ë¡ ë°©ì§€**
   - GUIì™€ ì›¹ ë²„ì „ ëª¨ë‘ ì ìš©
   - ì•Œë¦¼ ë©”ì‹œì§€ í‘œì‹œ
   - ë¡œê·¸ ê¸°ë¡

2. âœ… **ê¸°ì¡´ ë°ì´í„° ìë™ ì •ë¦¬**
   - í”„ë¡œê·¸ë¨ ì‹œì‘ ì‹œ ì¤‘ë³µ ì œê±°
   - ë¡œê·¸ ê¸°ë¡
   - ìë™ ì €ì¥

3. âœ… **ì¤‘ë³µ ì²´í¬ ë„êµ¬**
   - check_duplicate_urls.py
   - ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥
   - ìƒì„¸í•œ ì •ë³´ í‘œì‹œ

### ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

- **ëª…í™•í•œ ì•Œë¦¼**: ì¤‘ë³µ ë“±ë¡ ì‹œë„ ì‹œ ì¦‰ì‹œ ì•Œë¦¼
- **ì •ë³´ ì œê³µ**: ì–´ë–¤ ì±„íŒ…ë°©ê³¼ ì¤‘ë³µì¸ì§€ í‘œì‹œ
- **ìë™ ì •ë¦¬**: ê¸°ì¡´ ì¤‘ë³µ ë°ì´í„° ìë™ ì œê±°
- **ë¡œê·¸ ê¸°ë¡**: ëª¨ë“  ì‘ì—… ë‚´ì—­ ê¸°ë¡

### ì¤‘ë³µ í¬ìŠ¤íŒ… ë°©ì§€

- **ì›ì¸ ì œê±°**: ì¤‘ë³µ URL ì°¨ë‹¨
- **ìë™ ì •ë¦¬**: ê¸°ì¡´ ì¤‘ë³µ ì œê±°
- **ê²€ì¦ ë„êµ¬**: ì²´í¬ ìŠ¤í¬ë¦½íŠ¸ ì œê³µ

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- README.md
- DUPLICATE_POSTING_DIAGNOSIS.md
- WEB_QUICK_START.md
- BUILD_EXE_GUIDE.md

---

## ğŸ’¾ ì»¤ë°‹ ì •ë³´

- **ì»¤ë°‹ í•´ì‹œ**: (ë‹¤ìŒ ì»¤ë°‹ì—ì„œ ìƒì„±)
- **ë©”ì‹œì§€**: `feat: Add duplicate URL prevention with notifications`
- **ìˆ˜ì • íŒŒì¼**: 
  - src/band_poster.py
  - src/gui.py
  - streamlit_app.py
  - check_duplicate_urls.py (ì‹ ê·œ)
  - DUPLICATE_URL_PREVENTION.md (ì‹ ê·œ)

---

## ğŸ”— ì €ì¥ì†Œ

**GitHub**: https://github.com/rpaakdi1-spec/naver-band-auto-poster

**ë²„ì „**: v5.2.0

**ìƒíƒœ**: âœ… ì¤‘ë³µ URL ë°©ì§€ ê¸°ëŠ¥ ì™„ì„±

---

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´:
1. check_duplicate_urls.py ì‹¤í–‰
2. ë¡œê·¸ íŒŒì¼ í™•ì¸ (logs/)
3. GitHub Issuesì— ë³´ê³ 

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-23
