# 포스트 멀티라인 입력 개선 완료

## 📋 개요

포스트 내용 입력 시 **줄바꿈(엔터키)을 지원**하여 **긴 글을 여러 줄로 작성**할 수 있도록 개선되었습니다.

---

## ✨ 개선 내용

### 1. GUI 버전 (src/gui.py)

#### 기존 문제
- ScrolledText 위젯 사용으로 멀티라인 지원은 되었으나
- 리스트박스 표시 시 줄바꿈이 한 줄로 표시되어 혼란

#### 개선 사항
✅ **입력 안내 추가**
- "포스트 내용:" 옆에 "(엔터키로 줄바꿈 가능)" 안내 추가

✅ **표시 개선**
- 리스트박스에서 줄바꿈을 `\n`으로 명시적 표시
- 예: "첫 줄\n두 번째 줄\n세 번째 줄..."
- 최대 80자까지 표시 후 "..." 추가

✅ **로그 개선**
- 로그에는 줄바꿈 유지하여 원본 내용 확인 가능

### 2. 웹 버전 (streamlit_app.py)

#### 기존 문제
- `st.text_area` 사용으로 멀티라인 지원은 되었으나
- 표시 시 한 줄로만 보여 줄바꿈이 무시된 것처럼 보임
- 사용자가 엔터키 동작을 오해할 수 있음

#### 개선 사항
✅ **입력 높이 증가**
- height=100 → 150 (더 많은 줄 입력 가능)

✅ **명확한 안내 추가**
```python
placeholder="포스팅할 내용을 입력하세요...

💡 팁: 여러 줄 입력 가능합니다. 엔터키로 줄바꿈하세요!"

help="여러 줄 입력이 가능합니다. 입력이 끝나면 아래 [✚ 추가] 버튼을 클릭하세요."
```

✅ **줄바꿈 유지 표시**
- 등록된 포스트 리스트에서 줄바꿈 유지
- 최대 3줄 또는 100자까지 미리보기
- 초과 시 "..." 표시

---

## 💻 코드 변경

### GUI 변경 (src/gui.py)

#### 1. 안내 추가
```python
ttk.Label(post_frame, text="포스트 내용:").grid(row=0, column=0, sticky=tk.W)
ttk.Label(
    post_frame, 
    text="(엔터키로 줄바꿈 가능)", 
    font=("맑은 고딕", 8), 
    foreground="gray"
).grid(row=0, column=0, sticky=tk.E)
```

#### 2. 표시 개선
```python
def add_post(self):
    content = self.post_text.get("1.0", tk.END).strip()
    
    # 줄바꿈을 \n으로 표시
    display_content = content.replace('\n', '\\n')
    if len(display_content) > 80:
        display_content = display_content[:80] + "..."
    
    self.post_listbox.insert(tk.END, f"✓ {display_content}")
```

### Streamlit 변경 (streamlit_app.py)

#### 1. 입력 개선
```python
post_content = st.text_area(
    "포스트 내용",
    height=150,  # 100 → 150
    placeholder="포스팅할 내용을 입력하세요...\n\n💡 팁: 여러 줄 입력 가능합니다. 엔터키로 줄바꿈하세요!",
    help="여러 줄 입력이 가능합니다. 입력이 끝나면 아래 [✚ 추가] 버튼을 클릭하세요."
)
```

#### 2. 표시 개선
```python
# 줄바꿈 유지하여 표시 (최대 3줄)
lines = content.split('\n')
if len(lines) > 3 or len(content) > 100:
    preview_lines = lines[:3]
    preview = '\n'.join(preview_lines)
    if len(preview) > 100:
        preview = preview[:100] + "..."
    elif len(lines) > 3:
        preview = preview + "\n..."
    st.text(preview)
else:
    st.text(content)
```

---

## 📊 사용 예시

### GUI 버전

#### 예시 1: 짧은 한 줄 포스트
```
입력:
안녕하세요, 오늘도 좋은 하루 되세요!

리스트박스 표시:
✓ 안녕하세요, 오늘도 좋은 하루 되세요!
```

#### 예시 2: 여러 줄 포스트
```
입력:
안녕하세요!
오늘은 날씨가 정말 좋네요.
모두 행복한 하루 보내세요 😊

리스트박스 표시:
✓ 안녕하세요!\n오늘은 날씨가 정말 좋네요.\n모두 행복한 하루 보내세요 😊
```

#### 예시 3: 긴 여러 줄 포스트
```
입력:
[공지사항]
내일 오후 3시에 정기 모임이 있습니다.
참석 가능하신 분들은 댓글로 알려주세요.
장소는 카페 XYZ입니다.
많은 참여 부탁드립니다!

리스트박스 표시:
✓ [공지사항]\n내일 오후 3시에 정기 모임이 있습니다.\n참석 가능하신 분들은 댓글로 알려주세요.\n장소는 카페 ...
```

### 웹 버전

#### 예시 1: 짧은 한 줄 포스트
```
입력:
안녕하세요, 오늘도 좋은 하루 되세요!

등록된 포스트 표시:
안녕하세요, 오늘도 좋은 하루 되세요!
```

#### 예시 2: 여러 줄 포스트 (3줄 이하)
```
입력:
안녕하세요!
오늘은 날씨가 정말 좋네요.
모두 행복한 하루 보내세요 😊

등록된 포스트 표시:
안녕하세요!
오늘은 날씨가 정말 좋네요.
모두 행복한 하루 보내세요 😊
```

#### 예시 3: 긴 여러 줄 포스트 (3줄 초과)
```
입력:
[공지사항]
내일 오후 3시에 정기 모임이 있습니다.
참석 가능하신 분들은 댓글로 알려주세요.
장소는 카페 XYZ입니다.
많은 참여 부탁드립니다!

등록된 포스트 표시:
[공지사항]
내일 오후 3시에 정기 모임이 있습니다.
참석 가능하신 분들은 댓글로 알려주세요.
...
```

---

## 🎯 사용 방법

### GUI 버전

1. **포스트 입력**
   - "포스트 내용" 입력창에 텍스트 입력
   - **엔터키**를 눌러 줄바꿈
   - 여러 줄 입력 가능

2. **포스트 추가**
   - [✚ 추가] 버튼 클릭
   - 리스트에 추가됨 (줄바꿈은 `\n`으로 표시)

3. **포스트 확인**
   - 리스트박스에서 `\n`으로 줄바꿈 위치 확인
   - 실제 포스팅 시에는 줄바꿈이 정상 반영됨

### 웹 버전

1. **포스트 입력**
   - "포스트 내용" 입력창에 텍스트 입력
   - **엔터키**를 눌러 줄바꿈
   - 여러 줄 입력 가능
   - 플레이스홀더에 안내 확인

2. **포스트 추가**
   - [✚ 추가] 버튼 클릭 (또는 폼 내에서 Ctrl+Enter)
   - 리스트에 추가됨

3. **포스트 확인**
   - 등록된 포스트 영역에서 줄바꿈 유지된 미리보기 확인
   - 실제 포스팅 시에는 입력한 그대로 전송됨

---

## ⚠️ 주의사항

### 엔터키 동작

**GUI 버전:**
- ✅ **Enter**: 줄바꿈
- ✅ **[✚ 추가] 버튼**: 포스트 추가

**웹 버전:**
- ✅ **Enter**: 줄바꿈
- ✅ **[✚ 추가] 버튼**: 포스트 추가
- ⚠️ **Ctrl+Enter**: 폼 제출 (포스트 추가와 동일)

### 포스트 표시

- **GUI**: 리스트박스에서 `\n`으로 줄바꿈 표시
- **웹**: 실제 줄바꿈으로 표시 (최대 3줄 미리보기)
- **실제 포스팅**: 두 버전 모두 줄바꿈 유지

---

## ✅ 테스트 체크리스트

### GUI 버전
- [x] 한 줄 포스트 입력 및 추가
- [x] 여러 줄 포스트 입력 및 추가
- [x] 리스트박스에서 `\n` 표시 확인
- [x] 실제 포스팅 시 줄바꿈 유지 확인
- [x] 안내 문구 표시 확인

### 웹 버전
- [x] 한 줄 포스트 입력 및 추가
- [x] 여러 줄 포스트 입력 및 추가
- [x] 등록된 포스트에서 줄바꿈 유지 확인
- [x] 3줄 초과 시 미리보기 확인
- [x] 플레이스홀더 및 도움말 확인
- [x] 실제 포스팅 시 줄바꿈 유지 확인

---

## 📝 변경된 파일

| 파일 | 변경 내용 |
|------|----------|
| `src/gui.py` | - 안내 문구 추가<br>- 리스트박스 표시 개선 (`\n` 표시)<br>- 최대 80자 표시 |
| `streamlit_app.py` | - 입력창 높이 증가 (150)<br>- 플레이스홀더 안내 추가<br>- 도움말 추가<br>- 줄바꿈 유지 표시 (최대 3줄) |

**총 변경**: 2개 파일, 약 30줄 수정

---

## 💾 커밋 정보

**커밋 메시지**: `feat: Improve multiline post input with better display and guidance`

**변경 요약**:
- GUI: 줄바꿈 안내 및 `\n` 표시
- Streamlit: 입력창 개선 및 줄바꿈 유지 표시

---

## 🎉 결과

### 개선 전
- ❌ 줄바꿈이 보이지 않아 혼란
- ❌ 사용자가 엔터키 동작을 오해
- ❌ 긴 글 입력 시 불편

### 개선 후
- ✅ 명확한 줄바꿈 표시 (`\n` 또는 실제 줄바꿈)
- ✅ 명확한 안내 문구
- ✅ 긴 글 편하게 입력 가능
- ✅ 미리보기에서 줄바꿈 확인 가능

---

## 📚 관련 문서

- README.md
- WEB_QUICK_START.md
- DUPLICATE_URL_PREVENTION.md

---

## 🔗 저장소

**GitHub**: https://github.com/rpaakdi1-spec/naver-band-auto-poster

**버전**: v5.2.1

**상태**: ✅ 멀티라인 입력 개선 완료

---

**최종 업데이트**: 2026-01-23
